<head>
<title>The History of MetaPost</title>
<h1>The History of MetaPost</h1>
</head>
<BODY>

The <a href="mppubs.html#man">user's manual</a> describes Version 0.50,
and <a href="mppubs.html#gpaper"><cite>Drawing Graphs with MetaPost</cite></a>
describes what is new in Version 0.60.

<h2>Changes to the MetaPost Language Between Versions 0.50 and 0.60</h2>

<ol>
<li>
New operator <tt>readfrom</tt> &lt;filename&gt; and new command<br>
<tt>write</tt>  &lt;string expression&gt; to  &lt;filename&gt;
do file I/O.  There is a special string <tt>EOF</tt> that
<tt>readfrom</tt> and <tt>write</tt> understand as end-of-file.
<li>
New iteration type <tt>for</tt> p <tt>within</tt>
&lt;picture expression&gt;<tt>:</tt> &lt;loop text&gt; <tt>endfor</tt><br>
iterates through the interior components of the picture.  An &quot;interior
component&quot; is a single pen stroke, filled outline, or piece of typeset
text.  A part of the picture enclosed in a clipping or <tt>setbounds</tt> path
also counts as an interior component.  If the whole picture is enclosed
in such a path, the <tt>for</tt>...<tt>within</tt> iteration looks inside.
Note that apicture generated by <tt>btex</tt>...<tt>etex</tt> is enclosed
in a setbounds path.
<li>
The <tt>length</tt> operator now applies to pictures.  It returns the number of
interior components.
<li>
New boolean operators <tt>stroked</tt>, <tt>filled</tt>, <tt>textual</tt>,
<tt>clipped</tt>, <tt>bounded</tt> test the first component of a picture.
A picture enclosed in a clipping or <tt>setbounds</tt> path counts as a single
component.
<li>
Part extraction operators now work for pictures.  Standard operators
<tt>redpart</tt>, <tt>greenpart</tt>, <tt>bluepart</tt> apply to the color
of the first component and <tt>xpart</tt>, <tt>ypart</tt>, <tt>xxpart</tt>,
<tt>xypart</tt>, <tt>yxpart</tt>, <tt>yypart</tt> extract parts of the
tranformation that has been applied to a text component.
If &quot;<tt>textual</tt> p&quot; is false, the transform components are all
zero; if &quot;<tt>clipped</tt> p&quot; or &quot;<tt>bounded</tt> p&quot; is true,
the color parts are all zero.  Additional operators
<tt>fontpart</tt>, <tt>textpart</tt>, <tt>pathpart</tt>, <tt>penpart</tt>,
<tt>dashpart</tt> extract other information from the first component of a picture.
They all return null values when the first component has the wrong type.
<li>
The construction &quot;<tt>dashed nullpicture</tt>&quot; is now a no-op.
It used to be an error.
<li>
The <tt>clip</tt> and <tt>setbounds</tt> statements used to ignore operations
on empty pictures.  Now they do not.
<li>
Structuring comments in the PostScript output are now based on EPSF-3.0
as described in the 2nd Edition of the PostScript Reference Manual.
When <tt>prologues</tt> is 0, some structuring comments are included but the
output is not flagged a &quot;conforming document&quot;.  Previous versions
of MetaPost behaved similarly but used slightly different structuring
comments.
<li>
When <tt>warningcheck</tt> is 0, numeric tokens and results from the
<tt>hex</tt> and <tt>oct</tt> operators can be as large as 32767.99998.
The old limit of about 4096 applies only when <tt>warningcheck</tt> is positive.
<li>
Various optimizations should make the output a little more compact.
<li>
For PostScript engines that obey the scan-conversion rules documented
in the 2nd edition PostScript Language Reference Manual, hrules and
vrules in <tt>btex</tt>...<tt>etex</tt> blocks should now come out to exactly
the right number of pixels.  The change affects all pen strokes drawn in MetaPost
It is implemented via PostScript's <tt>dtransform</tt> and <tt>idtransform</tt>
operators.
<li>
A bug involving <tt>setbounds</tt> and MetaPost's corner operators has been fixed.
<li>
Degenerate elliptical pens no longer cause PostScript to divide by zero.
<li>
Fixed a very obscure bug involving readstring and end-of-file.
<li>
String compaction statistics are now printed correctly when the job
terminates with tracingstats positive.
</ol>

<h2>Changes to the MetaPost Language Between Versions 0.60 and 0.63</h2>

<ol>
<li>
<tt>plain.mp</tt> has been fixed so that the <code>x**y</code> works properly
when x<0 and y is a negative integer.
<li>
Programs <tt>mptotex.c</tt> and <tt>mptotr.c</tt> which extract
<tt>btex</tt>...<tt>etex</tt> material have been fixed so they work properly
with input files that do not end with a newline character.
<li>
Program <tt>dmp.c</tt> which handles troff output from
<tt>btex</tt>...<tt>etex</tt> blocks has been modified to avoid outputting
any non-ASCII characters that the C function <code>isprint()</code> accepts.
<li>
Program <tt>dmp.c</tt> no longer gets troff graphics specials confused with text.
This seldom matters because btex..etex blocks are unlikely to contain
troff graphics.
<li>
Pictures containing clipped subpictures could come out with some colors
in the subpicture wrong.
<li>
Colors in PostSript output were not being restricted to the standard 0...1
range.
<li>
Transforming a path or a pen should no longer generate extraneous overflow
errors in certain unusual situations.
<li>
Drawing with a degenerate 2-vertex polygonal pen such as penrazor should
no longer cause an infinite loop in certain unusual situations.
<li>
There were some bugs in the mfplain macros.  (These macros are designed
to similate plain METAFONT.)  The drawing and filling macros now apply
<tt>currenttransform</tt> to the path but not the pen rather than vice versa.
The predefined modes now set <tt>o_correction</tt> to 1.0.
<li>
For security reasons, <tt>mp</tt> can no longer read or write files whose names
begin with &quot;.&quot;
</ol>


<h2>Changes Subsequent to Version 0.63</h2>

<ol>
<li>
<tt>plain.mp</tt> now defines a new internal <tt>dotlabeldiam</tt>.
<li>
When <tt>prologues</tt> is negative, the output files use full precision for
coordinates in <tt>%%BoundingBox</tt> comments.
</ol>


<h2>MetaPost Timeline</h2>

<dl>
<dt>Aug 23, 1989<dd>
Preliminary paper <a href="mppubs.html#tug89">
<cite>A METAFONT-like System with PostScript Output,</cite></a>
presented at the TeX User's Group Meeting.

<dt>Jan 19, 1990<dd>
Work begins in ernest on <tt>mp</tt>, the MetaPost interpreter.

<dt>Feb 21, 1990<dd>
<tt>mp</tt> compiles for the first time.

<dt>March 6, 1990<dd>
MetaPost support added to <tt>dvips</tt>.

<dt>March 15, 1990<dd>
Initial version of <tt>dvitomp</tt> completed.

<dt>March 24 1990<dd>
First preliminary version installed locally at Bell Labs.

<dt>April 18, 1990<dd>
MetaPost support in <tt>dvips</tt> redone for TeX 3.0

<dt>May 1, 1990<dd>
&quot;Virtual fonts&quot; added to <tt>dvitomp</tt>.

<dt>Early May 1990<dd>
Initial inquiries about how to get permission to make MetaPost
available outside of AT&amp;T.

<dt>Aug. 28, 1990<dd>
Added <tt>troff</tt> support (version 0.15).

<dt>Jan. 10, 1991<dd>
First outside distribution of the MetaPost system.
Only a limited number of academic institutions are elligable,
and they must sign non-disclosure agreements.

<dt>April 30, 1991<dd>
Preliminary version of the MetaPost user's manual is completed.

<dt>March 25, 1992<dd>
MetaPost becomes available to any academic institution that
signs a non-disclosure agreement.

<dt>April 4, 1992<dd>
Updated User's Manual published as <a href="mppubs.html#man">CSTR 162</a>.

<dt>Apr 24, 1992<dd>
Version 0.50 released. (First version to be distributed widely).

<dt>Sep 14, 1992<dd>
<a href="mppubs.html#euro92"><cite>An Introduction to MetaPost</cite></a>
appears in the Proceedings of EuroTeX '92.

<dt>Oct 21, 1992<dd>
The MetaPost system runs on MS-DOS for the first time.

<dt>July 19, 1993<dd>
Finished the graph-drawing package and published the
documentation for it as <a href="mppubs.html#gpaper">CSTR 164</a>.

<dt>Dec 21, 1994<dd>
MetaPost becomes public.
</dl>
</body>
